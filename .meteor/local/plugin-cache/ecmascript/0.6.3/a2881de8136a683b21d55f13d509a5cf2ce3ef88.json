{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/client/group/group_page.js","filenameRelative":"/client/group/group_page.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":false,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/client/group/group_page.js.map","sourceFileName":"/client/group/group_page.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"group_page"},"ignored":false,"code":"Template.groupPage.helpers({\n  ownGroup: function () {\n    return this.userId === Meteor.userId();\n  },\n  partGroup: function () {\n    var res = 0;\n\n    if (this.userId === Meteor.userId()) {\n      res = 1;\n    } else {\n      for (i = 0; i < this.members.length; i++) {\n        if (this.members[i] === Meteor.user().emails[0].address) {\n          res = 1;\n          i = this.members.length;\n        }\n      }\n    }\n\n    return res;\n  }\n});\nTemplate.groupPage.events({\n  'click .delete': function (e) {\n    e.preventDefault();\n\n    if (confirm(\"Delete this group?\")) {\n      var currentGroupId = this._id;\n      Groups.remove(currentGroupId);\n      Router.go('groups');\n    }\n  },\n  'click .quit': function (e) {\n    e.preventDefault();\n\n    if (confirm(\"Do you want to leave this group?\")) {\n      var currentGroupId = this._id;\n      var member = Meteor.user().emails[0].address;\n      Groups.update(currentGroupId, {\n        $pull: {\n          members: member\n        }\n      });\n      Router.go('groups');\n    }\n  },\n  'click #min-input': function (e) {\n    e.preventDefault();\n\n    if (confirm(\"Do you want to kik \" + this + \" ?\")) {\n      var parentId = Template.parentData(1)._id;\n\n      var target = \"\" + this; //  console.log(\"taille parent : \"+Template.parentData(1).members.length);\n\n      console.log(target);\n      Groups.update({\n        _id: parentId\n      }, {\n        $pull: {\n          members: target\n        }\n      }); //alert(\"member removed!\");\n    }\n  },\n  'click #add-member': function (e) {\n    e.preventDefault(); //Récupération des éléments DOM des champs de saisie\n\n    var currentGroupId = this._id;\n    var AddedMember = document.querySelector('[name=AddedMember]');\n    Groups.update(currentGroupId, {\n      $push: {\n        members: AddedMember.value\n      }\n    });\n    AddedMember.value = \"\";\n  },\n  'click #open': function (e) {\n    Router.go('create', this);\n  }\n});","ast":null,"map":{"version":3,"sources":["/client/group/group_page.js"],"names":["Template","groupPage","helpers","ownGroup","userId","Meteor","partGroup","res","i","members","length","user","emails","address","events","e","preventDefault","confirm","currentGroupId","_id","Groups","remove","Router","go","member","update","$pull","parentId","parentData","target","console","log","AddedMember","document","querySelector","$push","value"],"mappings":"AAAAA,SAASC,SAAT,CAAmBC,OAAnB,CAA2B;AACzBC,YAAS,YAAU;AACjB,WAAO,KAAKC,MAAL,KAAgBC,OAAOD,MAAP,EAAvB;AACD,GAHwB;AAIzBE,aAAU,YAAU;AAClB,QAAIC,MAAI,CAAR;;AACA,QAAG,KAAKH,MAAL,KAAgBC,OAAOD,MAAP,EAAnB,EAAmC;AACjCG,YAAI,CAAJ;AACD,KAFD,MAGI;AACF,WAAIC,IAAE,CAAN,EAAQA,IAAE,KAAKC,OAAL,CAAaC,MAAvB,EAA8BF,GAA9B,EAAkC;AAChC,YAAG,KAAKC,OAAL,CAAaD,CAAb,MAAkBH,OAAOM,IAAP,GAAcC,MAAd,CAAqB,CAArB,EAAwBC,OAA7C,EAAqD;AACnDN,gBAAI,CAAJ;AACAC,cAAE,KAAKC,OAAL,CAAaC,MAAf;AACD;AACF;AACF;;AACD,WAAOH,GAAP;AACD;AAlBwB,CAA3B;AAqBAP,SAASC,SAAT,CAAmBa,MAAnB,CAA0B;AAExB,mBAAiB,UAASC,CAAT,EAAY;AAC3BA,MAAEC,cAAF;;AAEA,QAAIC,QAAQ,oBAAR,CAAJ,EAAmC;AACjC,UAAIC,iBAAiB,KAAKC,GAA1B;AACAC,aAAOC,MAAP,CAAcH,cAAd;AACAI,aAAOC,EAAP,CAAU,QAAV;AAED;AACF,GAXuB;AAYxB,iBAAe,UAASR,CAAT,EAAY;AACzBA,MAAEC,cAAF;;AAEA,QAAIC,QAAQ,kCAAR,CAAJ,EAAiD;AAC/C,UAAIC,iBAAiB,KAAKC,GAA1B;AACA,UAAIK,SAAOnB,OAAOM,IAAP,GAAcC,MAAd,CAAqB,CAArB,EAAwBC,OAAnC;AACAO,aAAOK,MAAP,CAAcP,cAAd,EAA6B;AAACQ,eAAQ;AAACjB,mBAAUe;AAAX;AAAT,OAA7B;AACAF,aAAOC,EAAP,CAAU,QAAV;AAED;AACF,GAtBuB;AAuBxB,sBAAoB,UAAUR,CAAV,EAAa;AAG/BA,MAAEC,cAAF;;AAEA,QAAIC,QAAQ,wBAAuB,IAAvB,GAA6B,IAArC,CAAJ,EAAgD;AAC9C,UAAIU,WAAS3B,SAAS4B,UAAT,CAAoB,CAApB,EAAuBT,GAApC;;AACA,UAAIU,SAAO,KAAG,IAAd,CAF8C,CAGhD;;AAGEC,cAAQC,GAAR,CAAYF,MAAZ;AACAT,aAAOK,MAAP,CAAc;AAACN,aAAIQ;AAAL,OAAd,EAA6B;AAACD,eAAQ;AAACjB,mBAAUoB;AAAX;AAAT,OAA7B,EAP8C,CAQhD;AACC;AAEF,GAvCuB;AAwCxB,uBAAqB,UAASd,CAAT,EAAY;AAC/BA,MAAEC,cAAF,GAD+B,CAE/B;;AACA,QAAIE,iBAAiB,KAAKC,GAA1B;AAEA,QAAIa,cAAcC,SAASC,aAAT,CAAuB,oBAAvB,CAAlB;AAEAd,WAAOK,MAAP,CAAcP,cAAd,EAA6B;AAACiB,aAAQ;AAAC1B,iBAAUuB,YAAYI;AAAvB;AAAT,KAA7B;AAEAJ,gBAAYI,KAAZ,GAAkB,EAAlB;AACD,GAlDuB;AAmDxB,iBAAe,UAASrB,CAAT,EAAW;AACtBO,WAAOC,EAAP,CAAU,QAAV,EAAoB,IAApB;AACH;AArDuB,CAA1B","file":"/client/group/group_page.js.map","sourcesContent":["Template.groupPage.helpers({\n  ownGroup:function(){\n    return this.userId === Meteor.userId();\n  },\n  partGroup:function(){\n    var res=0;\n    if(this.userId === Meteor.userId()){\n      res=1;\n    }\n    else{\n      for(i=0;i<this.members.length;i++){\n        if(this.members[i]===Meteor.user().emails[0].address){\n          res=1;\n          i=this.members.length;\n        }\n      }\n    }\n    return res;\n  }\n});\n\nTemplate.groupPage.events({\n\n  'click .delete': function(e) {\n    e.preventDefault();\n\n    if (confirm(\"Delete this group?\")) {\n      var currentGroupId = this._id;\n      Groups.remove(currentGroupId);\n      Router.go('groups');\n\n    }\n  },\n  'click .quit': function(e) {\n    e.preventDefault();\n\n    if (confirm(\"Do you want to leave this group?\")) {\n      var currentGroupId = this._id;\n      var member=Meteor.user().emails[0].address;\n      Groups.update(currentGroupId,{$pull : {members : member}} );\n      Router.go('groups');\n\n    }\n  },\n  'click #min-input': function (e) {\n\n\n    e.preventDefault();\n\n    if (confirm(\"Do you want to kik \" +this +\" ?\")) {\n      var parentId=Template.parentData(1)._id;\n      var target=\"\"+this;\n    //  console.log(\"taille parent : \"+Template.parentData(1).members.length);\n\n\n      console.log(target);\n      Groups.update({_id:parentId},{$pull : {members : target}} );\n    //alert(\"member removed!\");\n    }\n\n  },\n  'click #add-member': function(e) {\n    e.preventDefault();\n    //Récupération des éléments DOM des champs de saisie\n    var currentGroupId = this._id;\n\n    var AddedMember = document.querySelector('[name=AddedMember]');\n\n    Groups.update(currentGroupId,{$push : {members : AddedMember.value}} );\n\n    AddedMember.value=\"\";\n  },\n  'click #open': function(e){\n      Router.go('create', this);\n  }\n});\n"]},"hash":"a2881de8136a683b21d55f13d509a5cf2ce3ef88"}
