[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar TAPi18next = Package['tap:i18n'].TAPi18next;\nvar TAPi18n = Package['tap:i18n'].TAPi18n;\nvar _ = Package.underscore._;\nvar Template = Package['templating-runtime'].Template;\nvar Blaze = Package.blaze.Blaze;\nvar UI = Package.blaze.UI;\nvar Handlebars = Package.blaze.Handlebars;\nvar Spacebars = Package.spacebars.Spacebars;\nvar HTML = Package.htmljs.HTML;\n\n/* Package-scope variables */\nvar __coffeescriptShare;\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                    //\n// packages/tap_i18n-ui/i18n_ui_amplify.coffee.js                                                     //\n//                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                      //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nTAPi18n.setLanguageAmplify = function(language) {                                                     // 2\n  amplify.store('tap-i18n-language', language);                                                       // 3\n  return TAPi18n.setLanguage(language).always(TAPi18n._afterUILanguageChange);                        //\n};                                                                                                    // 2\n                                                                                                      //\nMeteor.startup(function() {                                                                           // 2\n  var ref, storedLanguage;                                                                            // 8\n  storedLanguage = amplify.store('tap-i18n-language');                                                // 8\n  if (storedLanguage) {                                                                               // 9\n    return TAPi18n.setLanguage(storedLanguage);                                                       //\n  } else {                                                                                            //\n    if ((ref = _.keys(TAPi18n.getLanguages())) != null ? ref[0] : void 0) {                           // 12\n      return TAPi18n.setLanguageAmplify(_.keys(TAPi18n.getLanguages())[0]);                           //\n    }                                                                                                 //\n  }                                                                                                   //\n});                                                                                                   // 7\n                                                                                                      //\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                    //\n// packages/tap_i18n-ui/i18n_ui_client_helpers.coffee.js                                              //\n//                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                      //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar key, ref, val;                                                                                    // 2\n                                                                                                      //\nTAPi18n.uiHelpers = {                                                                                 // 2\n  enabled: function() {                                                                               // 3\n    return TAPi18n.conf != null;                                                                      //\n  },                                                                                                  //\n  sortedLanguages: function() {                                                                       // 3\n    var key, langauges, val;                                                                          // 7\n    langauges = TAPi18n.getLanguages();                                                               // 7\n    for (key in langauges) {                                                                          // 9\n      val = langauges[key];                                                                           //\n      langauges[key].tag = key;                                                                       // 10\n    }                                                                                                 // 9\n    return _.sortBy(_.values(langauges, function(language) {                                          //\n      return language.tag;                                                                            //\n    }));                                                                                              //\n  },                                                                                                  //\n  isCurrentLanguage: function(tag) {                                                                  // 3\n    return tag === TAPi18n.getLanguage();                                                             //\n  },                                                                                                  //\n  currentLanguage: function() {                                                                       // 3\n    var currentLanguage, ref;                                                                         // 19\n    currentLanguage = (ref = TAPi18n.getLanguages()) != null ? ref[TAPi18n.getLanguage()] : void 0;   // 19\n    currentLanguage.tag = TAPi18n.getLanguage();                                                      // 19\n    return currentLanguage;                                                                           // 21\n  }                                                                                                   //\n};                                                                                                    //\n                                                                                                      //\nref = TAPi18n.uiHelpers;                                                                              // 24\nfor (key in ref) {                                                                                    // 24\n  val = ref[key];                                                                                     //\n  UI.registerHelper(\"i18n_\" + key, val);                                                              // 25\n}                                                                                                     // 24\n                                                                                                      //\nTAPi18n._afterUILanguageChange = function() {                                                         // 2\n  return null;                                                                                        //\n};                                                                                                    // 28\n                                                                                                      //\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                    //\n// packages/tap_i18n-ui/frameworks/template.i18n_ui_bootstrap.js                                      //\n//                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                      //\n                                                                                                      // 1\nTemplate.__checkName(\"i18n_dropdown\");                                                                // 2\nTemplate[\"i18n_dropdown\"] = new Template(\"Template.i18n_dropdown\", (function() {                      // 3\n  var view = this;                                                                                    // 4\n  return HTML.SPAN({                                                                                  // 5\n    class: \"tap-i18n-dropdown\"                                                                        // 6\n  }, \"\\n    \", Blaze.If(function() {                                                                  // 7\n    return Spacebars.call(view.lookup(\"i18n_enabled\"));                                               // 8\n  }, function() {                                                                                     // 9\n    return [ \"\\n      \", HTML.SELECT({                                                                // 10\n      class: \"form-control\"                                                                           // 11\n    }, \"\\n        \", Blaze.Each(function() {                                                          // 12\n      return Spacebars.call(view.lookup(\"i18n_sortedLanguages\"));                                     // 13\n    }, function() {                                                                                   // 14\n      return [ \"\\n          \", HTML.OPTION({                                                          // 15\n        value: function() {                                                                           // 16\n          return Spacebars.mustache(view.lookup(\"tag\"));                                              // 17\n        },                                                                                            // 18\n        selected: function() {                                                                        // 19\n          return Spacebars.mustache(view.lookup(\"i18n_isCurrentLanguage\"), view.lookup(\"tag\"));       // 20\n        }                                                                                             // 21\n      }, Blaze.View(\"lookup:name\", function() {                                                       // 22\n        return Spacebars.mustache(view.lookup(\"name\"));                                               // 23\n      })), \"\\n        \" ];                                                                            // 24\n    }), \"\\n      \"), \"\\n    \" ];                                                                      // 25\n  }, function() {                                                                                     // 26\n    return [ \"\\n      \", HTML.SPAN({                                                                  // 27\n      class: \"i18n-not-found\"                                                                         // 28\n    }, \"No i18n files found\"), \"\\n    \" ];                                                            // 29\n  }), \"\\n  \");                                                                                        // 30\n}));                                                                                                  // 31\n                                                                                                      // 32\nTemplate.__checkName(\"i18n_buttons\");                                                                 // 33\nTemplate[\"i18n_buttons\"] = new Template(\"Template.i18n_buttons\", (function() {                        // 34\n  var view = this;                                                                                    // 35\n  return HTML.SPAN({                                                                                  // 36\n    class: \"tap-i18n-buttons\"                                                                         // 37\n  }, \"\\n    \", Blaze.If(function() {                                                                  // 38\n    return Spacebars.call(view.lookup(\"i18n_enabled\"));                                               // 39\n  }, function() {                                                                                     // 40\n    return [ \"\\n      \", Blaze.Each(function() {                                                      // 41\n      return Spacebars.call(view.lookup(\"i18n_sortedLanguages\"));                                     // 42\n    }, function() {                                                                                   // 43\n      return [ \"\\n        \", HTML.BUTTON({                                                            // 44\n        type: \"button\",                                                                               // 45\n        class: function() {                                                                           // 46\n          return [ \"btn \", Blaze.If(function() {                                                      // 47\n            return Spacebars.dataMustache(view.lookup(\"i18n_isCurrentLanguage\"), view.lookup(\"tag\"));\n          }, function() {                                                                             // 49\n            return \"btn-primary\";                                                                     // 50\n          }, function() {                                                                             // 51\n            return \"btn-default\";                                                                     // 52\n          }) ];                                                                                       // 53\n        }                                                                                             // 54\n      }, Blaze.View(\"lookup:name\", function() {                                                       // 55\n        return Spacebars.mustache(view.lookup(\"name\"));                                               // 56\n      })), \"\\n      \" ];                                                                              // 57\n    }), \"\\n    \" ];                                                                                   // 58\n  }, function() {                                                                                     // 59\n    return [ \"\\n      \", HTML.SPAN({                                                                  // 60\n      class: \"i18n-not-found\"                                                                         // 61\n    }, \"No i18n files found\"), \"\\n    \" ];                                                            // 62\n  }), \"\\n  \");                                                                                        // 63\n}));                                                                                                  // 64\n                                                                                                      // 65\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                    //\n// packages/tap_i18n-ui/frameworks/i18n_ui_bootstrap.coffee.js                                        //\n//                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                      //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nTemplate.i18n_dropdown.events({                                                                       // 1\n  'change .tap-i18n-dropdown select': function(e) {                                                   // 3\n    return TAPi18n.setLanguageAmplify($(e.currentTarget).val());                                      //\n  }                                                                                                   //\n});                                                                                                   //\n                                                                                                      //\nTemplate.i18n_buttons.events({                                                                        // 1\n  'click .tap-i18n-buttons button': function(e, tmpl) {                                               // 7\n    return TAPi18n.setLanguageAmplify(this.tag);                                                      //\n  }                                                                                                   //\n});                                                                                                   //\n                                                                                                      //\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                    //\n// packages/tap_i18n-ui/frameworks/template.i18n_ui_semantic.js                                       //\n//                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                      //\n                                                                                                      // 1\nTemplate.__checkName(\"i18n_dropdown_semantic\");                                                       // 2\nTemplate[\"i18n_dropdown_semantic\"] = new Template(\"Template.i18n_dropdown_semantic\", (function() {    // 3\n  var view = this;                                                                                    // 4\n  return HTML.SPAN({                                                                                  // 5\n    class: \"tap-i18n-dropdown\"                                                                        // 6\n  }, \"\\n    \", Blaze.If(function() {                                                                  // 7\n    return Spacebars.call(view.lookup(\"i18n_enabled\"));                                               // 8\n  }, function() {                                                                                     // 9\n    return [ \"\\n    \", HTML.DIV({                                                                     // 10\n      class: \"ui form\"                                                                                // 11\n    }, \"\\n      \", HTML.DIV({                                                                         // 12\n      class: \"field\"                                                                                  // 13\n    }, \"\\n        \", HTML.SELECT({                                                                    // 14\n      class: \"ui floating compact dropdown search\"                                                    // 15\n    }, \"\\n          \", Blaze.Each(function() {                                                        // 16\n      return Spacebars.call(view.lookup(\"i18n_sortedLanguages\"));                                     // 17\n    }, function() {                                                                                   // 18\n      return [ \"\\n            \", HTML.OPTION({                                                        // 19\n        value: function() {                                                                           // 20\n          return Spacebars.mustache(view.lookup(\"tag\"));                                              // 21\n        },                                                                                            // 22\n        selected: function() {                                                                        // 23\n          return Spacebars.mustache(view.lookup(\"i18n_isCurrentLanguage\"), view.lookup(\"tag\"));       // 24\n        }                                                                                             // 25\n      }, Blaze.View(\"lookup:name\", function() {                                                       // 26\n        return Spacebars.mustache(view.lookup(\"name\"));                                               // 27\n      })), \"\\n          \" ];                                                                          // 28\n    }), \"\\n        \"), \"\\n      \"), \"\\n    \"), \"\\n    \" ];                                            // 29\n  }, function() {                                                                                     // 30\n    return [ \"\\n      \", HTML.SPAN({                                                                  // 31\n      class: \"i18n-not-found\"                                                                         // 32\n    }, \"No i18n files found\"), \"\\n    \" ];                                                            // 33\n  }), \"\\n  \");                                                                                        // 34\n}));                                                                                                  // 35\n                                                                                                      // 36\nTemplate.__checkName(\"i18n_buttons_semantic\");                                                        // 37\nTemplate[\"i18n_buttons_semantic\"] = new Template(\"Template.i18n_buttons_semantic\", (function() {      // 38\n  var view = this;                                                                                    // 39\n  return HTML.SPAN({                                                                                  // 40\n    class: \"tap-i18n-buttons\"                                                                         // 41\n  }, \"\\n    \", Blaze.If(function() {                                                                  // 42\n    return Spacebars.call(view.lookup(\"i18n_enabled\"));                                               // 43\n  }, function() {                                                                                     // 44\n    return [ \"\\n      \", Blaze.Each(function() {                                                      // 45\n      return Spacebars.call(view.lookup(\"i18n_sortedLanguages\"));                                     // 46\n    }, function() {                                                                                   // 47\n      return [ \"\\n        \", HTML.BUTTON({                                                            // 48\n        type: \"button\",                                                                               // 49\n        class: function() {                                                                           // 50\n          return [ \"mini ui \", Blaze.If(function() {                                                  // 51\n            return Spacebars.dataMustache(view.lookup(\"i18n_isCurrentLanguage\"), view.lookup(\"tag\"));\n          }, function() {                                                                             // 53\n            return \"primary\";                                                                         // 54\n          }), \" button\" ];                                                                            // 55\n        }                                                                                             // 56\n      }, Blaze.View(\"lookup:name\", function() {                                                       // 57\n        return Spacebars.mustache(view.lookup(\"name\"));                                               // 58\n      })), \"\\n      \" ];                                                                              // 59\n    }), \"\\n    \" ];                                                                                   // 60\n  }, function() {                                                                                     // 61\n    return [ \"\\n      \", HTML.SPAN({                                                                  // 62\n      class: \"i18n-not-found\"                                                                         // 63\n    }, \"No i18n files found\"), \"\\n    \" ];                                                            // 64\n  }), \"\\n  \");                                                                                        // 65\n}));                                                                                                  // 66\n                                                                                                      // 67\nTemplate.__checkName(\"i18n_flags_semantic\");                                                          // 68\nTemplate[\"i18n_flags_semantic\"] = new Template(\"Template.i18n_flags_semantic\", (function() {          // 69\n  var view = this;                                                                                    // 70\n  return HTML.SPAN({                                                                                  // 71\n    class: \"tap-i18n-flags\"                                                                           // 72\n  }, \"\\n    \", Blaze.If(function() {                                                                  // 73\n    return Spacebars.call(view.lookup(\"i18n_enabled\"));                                               // 74\n  }, function() {                                                                                     // 75\n    return [ \"\\n      \", Blaze.Each(function() {                                                      // 76\n      return Spacebars.call(view.lookup(\"sortedFlagTags\"));                                           // 77\n    }, function() {                                                                                   // 78\n      return [ \"\\n        \", HTML.I({                                                                 // 79\n        class: function() {                                                                           // 80\n          return [ Spacebars.mustache(view.lookup(\"flagTag\")), \" flag\" ];                             // 81\n        }                                                                                             // 82\n      }), \"\\n      \" ];                                                                               // 83\n    }), \"\\n    \" ];                                                                                   // 84\n  }, function() {                                                                                     // 85\n    return [ \"\\n      \", HTML.SPAN({                                                                  // 86\n      class: \"i18n-not-found\"                                                                         // 87\n    }, \"No i18n files found\"), \"\\n    \" ];                                                            // 88\n  }), \"\\n  \");                                                                                        // 89\n}));                                                                                                  // 90\n                                                                                                      // 91\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                    //\n// packages/tap_i18n-ui/frameworks/i18n_ui_semantic.coffee.js                                         //\n//                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                      //\n__coffeescriptShare = typeof __coffeescriptShare === 'object' ? __coffeescriptShare : {}; var share = __coffeescriptShare;\nvar flagTagMap;                                                                                       // 1\n                                                                                                      //\nTemplate.i18n_dropdown_semantic.rendered = function() {                                               // 1\n  return $('select.dropdown').dropdown();                                                             //\n};                                                                                                    // 1\n                                                                                                      //\nTemplate.i18n_dropdown_semantic.events({                                                              // 1\n  'change .tap-i18n-dropdown select': function(e) {                                                   // 6\n    return TAPi18n.setLanguageAmplify($(e.currentTarget).val());                                      //\n  }                                                                                                   //\n});                                                                                                   //\n                                                                                                      //\nTemplate.i18n_buttons_semantic.events({                                                               // 1\n  'click .tap-i18n-buttons button': function(e, tmpl) {                                               // 10\n    return TAPi18n.setLanguageAmplify(this.tag);                                                      //\n  }                                                                                                   //\n});                                                                                                   //\n                                                                                                      //\nTemplate.i18n_flags_semantic.events({                                                                 // 1\n  'click .tap-i18n-flags .flag': function(e, tmpl) {                                                  // 13\n    return TAPi18n.setLanguageAmplify(this.tag);                                                      //\n  }                                                                                                   //\n});                                                                                                   //\n                                                                                                      //\nflagTagMap = {                                                                                        // 1\n  'en': 'gb',                                                                                         // 17\n  'zh': 'cn',                                                                                         // 17\n  'ja': 'jp'                                                                                          // 17\n};                                                                                                    //\n                                                                                                      //\nTemplate.i18n_flags_semantic.helpers({                                                                // 1\n  sortedFlagTags: function() {                                                                        // 22\n    var sortedLanguages;                                                                              // 23\n    sortedLanguages = TAPi18n.uiHelpers.sortedLanguages();                                            // 23\n    return sortedLanguages.map(function(obj) {                                                        // 24\n      obj.flagTag = flagTagMap[obj.tag] || obj.tag;                                                   // 25\n      return obj;                                                                                     // 26\n    });                                                                                               //\n  }                                                                                                   //\n});                                                                                                   //\n                                                                                                      //\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\nPackage['tap:i18n-ui'] = {};\n\n})();\n","servePath":"/packages/tap_i18n-ui.js","sourceMap":{"version":3,"sources":["/packages/tap_i18n-ui/i18n_ui_amplify.coffee","/packages/tap_i18n-ui/i18n_ui_client_helpers.coffee","/packages/tap_i18n-ui/frameworks/i18n_ui_bootstrap.coffee","/packages/tap_i18n-ui/frameworks/i18n_ui_semantic.coffee"],"names":[],"mappings":"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","file":"/packages/tap_i18n-ui.js","sourcesContent":["# Add amplify helper to TAPi18n\nTAPi18n.setLanguageAmplify = (language) ->\n  amplify.store 'tap-i18n-language', language\n  TAPi18n.setLanguage(language).always(TAPi18n._afterUILanguageChange)\n\n# set the language on startup if it's already been set, otherwise set default\nMeteor.startup ->\n  storedLanguage = amplify.store 'tap-i18n-language'\n  if storedLanguage\n    TAPi18n.setLanguage storedLanguage\n  else\n    if _.keys(TAPi18n.getLanguages())?[0]\n      TAPi18n.setLanguageAmplify _.keys(TAPi18n.getLanguages())[0]\n","# only show if TAPi18n is enabled\nTAPi18n.uiHelpers =\n  enabled: -> TAPi18n.conf?\n\n  # transform getLanguages into ordered array\n  sortedLanguages:  ->\n    langauges = TAPi18n.getLanguages()\n    # map language tag into the object\n    for key,val of langauges\n      langauges[key].tag = key\n    # return array sorted alphabetically by tag\n    _.sortBy _.values langauges, (language) -> language.tag\n\n  # check if language option is current language\n  isCurrentLanguage:  (tag) -> tag is TAPi18n.getLanguage()\n\n  # find and decorate current language\n  currentLanguage:  ->\n    currentLanguage = TAPi18n.getLanguages()?[TAPi18n.getLanguage()]\n    currentLanguage.tag = TAPi18n.getLanguage()\n    return currentLanguage\n\n# add to ui\nfor key, val of TAPi18n.uiHelpers\n  UI.registerHelper \"i18n_#{key}\", val\n\n# add language change event, to be redefined in project if needed\nTAPi18n._afterUILanguageChange = -> null","Template.i18n_dropdown.events\n  # set language to selected option's tag\n  'change .tap-i18n-dropdown select' : (e) -> TAPi18n.setLanguageAmplify $(e.currentTarget).val()\n\nTemplate.i18n_buttons.events\n  # set language to context tag\n  'click .tap-i18n-buttons button' : (e,tmpl) -> TAPi18n.setLanguageAmplify @tag\n","Template.i18n_dropdown_semantic.rendered = ->\n  $('select.dropdown').dropdown()\n\nTemplate.i18n_dropdown_semantic.events\n  # set language to selected option's tag\n  'change .tap-i18n-dropdown select' : (e) -> TAPi18n.setLanguageAmplify $(e.currentTarget).val()\n\nTemplate.i18n_buttons_semantic.events\n  # set language to context tag\n  'click .tap-i18n-buttons button' : (e,tmpl) -> TAPi18n.setLanguageAmplify @tag\n\nTemplate.i18n_flags_semantic.events\n  'click .tap-i18n-flags .flag' : (e,tmpl) ->\n    TAPi18n.setLanguageAmplify @tag\n\nflagTagMap =\n  'en': 'gb'\n  'zh': 'cn'\n  'ja': 'jp'\n\nTemplate.i18n_flags_semantic.helpers\n  sortedFlagTags: ->\n    sortedLanguages = TAPi18n.uiHelpers.sortedLanguages()\n    return sortedLanguages.map (obj) ->\n      obj.flagTag = flagTagMap[obj.tag] || obj.tag\n      return obj\n"]}}]