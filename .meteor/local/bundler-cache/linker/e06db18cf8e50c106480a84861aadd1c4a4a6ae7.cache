[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Tracker = Package.tracker.Tracker;\nvar Deps = Package.tracker.Deps;\nvar Mongo = Package.mongo.Mongo;\nvar _ = Package.underscore._;\n\n/* Package-scope variables */\nvar Presences, Presence;\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////\n//                                                                         //\n// packages/tmeasday_presence/packages/tmeasday_presence.js                //\n//                                                                         //\n/////////////////////////////////////////////////////////////////////////////\n                                                                           //\n(function () {                                                             // 1\n                                                                           // 2\n///////////////////////////////////////////////////////////////////////    // 3\n//                                                                   //    // 4\n// packages/tmeasday:presence/lib/common.js                          //    // 5\n//                                                                   //    // 6\n///////////////////////////////////////////////////////////////////////    // 7\n                                                                     //    // 8\nPresences = new Mongo.Collection('presences');                       // 1  // 9\n// For backwards compatibilty                                        // 2  // 10\nMeteor.presences = Presences;                                        // 3  // 11\n                                                                     // 4  // 12\nMeteor.methods({                                                     // 5  // 13\n  updatePresence: function(state) {                                  // 6  // 14\n    check(state, Match.Any);                                         // 7  // 15\n                                                                     // 8  // 16\n    var connectionId = this.isSimulation                             // 9  // 17\n      ? Meteor.connection._lastSessionId                             // 10\n      : this.connection.id;                                          // 11\n                                                                     // 12\n    // Should never happen                                           // 13\n    if (! connectionId)                                              // 14\n      return;                                                        // 15\n                                                                     // 16\n    var update = {};                                                 // 17\n    update.state = state;                                            // 18\n    if (typeof Meteor.userId !== 'undefined' && Meteor.userId())     // 19\n      update.userId = Meteor.userId();                               // 20\n                                                                     // 21\n    Presences.update(connectionId, update);                          // 22\n  }                                                                  // 23\n});                                                                  // 24\n                                                                     // 25\n///////////////////////////////////////////////////////////////////////    // 34\n                                                                           // 35\n}).call(this);                                                             // 36\n                                                                           // 37\n                                                                           // 38\n                                                                           // 39\n                                                                           // 40\n                                                                           // 41\n                                                                           // 42\n(function () {                                                             // 43\n                                                                           // 44\n///////////////////////////////////////////////////////////////////////    // 45\n//                                                                   //    // 46\n// packages/tmeasday:presence/lib/client.js                          //    // 47\n//                                                                   //    // 48\n///////////////////////////////////////////////////////////////////////    // 49\n                                                                     //    // 50\nPresence = {};                                                       // 1  // 51\nPresence.state = function() {                                        // 2  // 52\n  return 'online';                                                   // 3  // 53\n};                                                                   // 4  // 54\n                                                                     // 5  // 55\n// For backwards compatibilty                                        // 6  // 56\nMeteor.Presence = Presence;                                          // 7  // 57\n                                                                     // 8  // 58\nMeteor.startup(function() {                                          // 9  // 59\n  Tracker.autorun(function() {                                       // 10\n    // This also runs on sign-in/sign-out                            // 11\n    if (Meteor.status().status === 'connected')                      // 12\n      Meteor.call('updatePresence', Presence.state());               // 13\n  });                                                                // 14\n                                                                     // 15\n  Meteor.setInterval(function() {                                    // 16\n    Meteor.call('presenceTick');                                     // 17\n  }, 5000);                                                          // 18\n});                                                                  // 19\n                                                                     // 20\n///////////////////////////////////////////////////////////////////////    // 71\n                                                                           // 72\n}).call(this);                                                             // 73\n                                                                           // 74\n/////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nif (typeof Package === 'undefined') Package = {};\n(function (pkg, symbols) {\n  for (var s in symbols)\n    (s in pkg) || (pkg[s] = symbols[s]);\n})(Package['tmeasday:presence'] = {}, {\n  Presences: Presences,\n  Presence: Presence\n});\n\n})();\n","servePath":"/packages/tmeasday_presence.js"}]